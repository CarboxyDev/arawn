Script started on Wed Nov 19 13:13:25 2025
^C[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;32mâ¯[0m [K[?1h=[?2004h[[n  ppnpm test:integrationpn  [?1l>[?2004l
]2;pnpm test:integration]1;pnpm
> arawn-monorepo@1.0.0 test:integration /Users/arman/Github/arawn
> turbo run test:integration

[2mturbo 2.6.1[0m

  [31mÃ—[0m Missing tasks in project
[31m  â•°â”€â–¶ [0m  [31mÃ—[0m Could not find task `test:integration` in project

[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 1.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;31mâ¯[0m [K[?1h=[?2004hpnpm test:integration[11Drtest:integration[16Dutest:integration[16Dntest:integration[16D test:integration[16D[?1l>[?2004l
]2;pnpm run test:integration]1;pnpm
> arawn-monorepo@1.0.0 test:integration /Users/arman/Github/arawn
> turbo run test:integration

[2mturbo 2.6.1[0m

  [31mÃ—[0m Missing tasks in project
[31m  â•°â”€â–¶ [0m  [31mÃ—[0m Could not find task `test:integration` in project

[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 1.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;31mâ¯[0m [K[?1h=[?2004hc[?1l>[?2004l
]2;echo -e "\033c"]1;cc
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;32mâ¯[0m [K[?1h=[?2004hpp[90mnpm run test:integration[39m[24Dp[39mn[39mp[39mm[39m [39mt[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [19D[90mest:integration[39m[15D[39me[39ms[39mt[39m:[39mi[39mn[39mt[39me[39mg[39mr[39ma[39mt[39mi[39mo[39mn[?1l>[?2004l
]2;pnpm test:integration]1;pnpm
> arawn-monorepo@1.0.0 test:integration /Users/arman/Github/arawn
> turbo run test:integration

[2mturbo 2.6.1[0m

  [31mÃ—[0m Missing tasks in project
[31m  â•°â”€â–¶ [0m  [31mÃ—[0m Could not find task `test:integration` in project

[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 1.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;31mâ¯[0m [K[?1h=[?2004hpnpm test:integration[11D           [11D[90mintegration[39m[11D[10Di         [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [20Dintegration[11Dpnpm test:[7mi[7mntegration[27m[11D[27mi[27mn[27mt[27me[27mg[27mr[27ma[27mt[27mi[27mo[27mn[90mintegration[39m[11D[39mi[39mn[39mt[39me[39mg[39mr[39ma[39mt[39mi[39mo[39mn            [90mn[39m [39m [90mon[39m [39m [39m [90mion[39m [39m [39m [39m [90mtion[39m [39m [39m [39m [39m [90mation[39m [39m [39m [39m [39m [39m [90mration[39m [39m [39m [39m [39m [39m [39m [90mgration[39m [39m [39m [39m [39m [39m [39m [39m [8D[90megration[39m[8D [39m [39m [39m [39m [39m [39m [39m [39m [9D[90mtegration[39m[9D [39m [39m [39m [39m [39m [39m [39m [39m [39m [10D[90mntegration[39m[10D [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [11D[90mintegration[39m[11D[10Di         [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [20Dintegration[11Dpnpm test:[7mi[7mntegration[27m[11D[27mi[27mn[27mt[27me[27mg[27mr[27ma[27mt[27mi[27mo[27mn[90mintegration[39m[11D[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [11D[?1l>[?2004l
]2;pnpm test:integration]1;pnpm
> arawn-monorepo@1.0.0 test:integration /Users/arman/Github/arawn
> turbo run test:integration

[2mturbo 2.6.1[0m

  [31mÃ—[0m Missing tasks in project
[31m  â•°â”€â–¶ [0m  [31mÃ—[0m Could not find task `test:integration` in project

[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 1.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;31mâ¯[0m [K[?1h=[?2004hppnpm test:integration[21D[7mp[7mn[7mp[7mm[7m [7mt[7me[7ms[7mt[7m:[7mi[7mn[7mt[7me[7mg[7mr[7ma[7mt[7mi[7mo[7mn[27m[21D[27mp[27mn[27mp[27mm[27m [27mt[27me[27ms[27mt[27m:[27mi[27mn[27mt[27me[27mg[27mr[27ma[27mt[27mi[27mo[27mn[?1l>[?2004l
]2;pnpm test:integration]1;pnpm
> arawn-monorepo@1.0.0 test:integration /Users/arman/Github/arawn
> turbo run test:integration

[2mturbo 2.6.1[0m

  [31mÃ—[0m Missing tasks in project
[31m  â•°â”€â–¶ [0m  [31mÃ—[0m Could not find task `test:integration` in project

[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mCommand failed with exit code 1.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;31mâ¯[0m [K[?1h=[?2004hc[?1l>[?2004l
]2;echo -e "\033c"]1;cc
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;32mâ¯[0m [K[?1h=[?2004hn pp[90mnpm test:integration[39m[20Dp[39mn[39mp[39mm[39m [39mt[39me[39ms[39mt[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [12D[?1l>[?2004l
]2;pnpm test]1;pnpm
> arawn-monorepo@1.0.0 test /Users/arman/Github/arawn
> turbo run test

[2mturbo 2.6.1[0m

[2mâ€¢ Packages in scope: @repo/api, @repo/frontend, @repo/packages-types, @repo/packages-utils[0m
[2mâ€¢ Running [0m[1m[2mtest[0m[2m in 4 packages
[0m[2mâ€¢ Remote caching disabled[0m
[32m@repo/packages-utils:test: [0mcache miss, executing [2m8c304f39903a7344[0m
[32m@repo/packages-utils:test: [0m
[34m@repo/packages-types:test: [0mcache miss, executing [2m1b71ed176f12cea1[0m
[34m@repo/packages-types:test: [0m
[36m@repo/packages-types:typecheck: [0mcache hit, replaying logs [2me57fbb71198ab7a0[0m
[33m@repo/packages-utils:typecheck: [0mcache hit, replaying logs [2m097981c7dc4c46c0[0m
[36m@repo/packages-types:typecheck: [0m
[36m@repo/packages-types:typecheck: [0m> @repo/packages-types@1.0.0 typecheck /Users/arman/Github/arawn/packages/types
[36m@repo/packages-types:typecheck: [0m> tsc --noEmit
[36m@repo/packages-types:typecheck: [0m
[33m@repo/packages-utils:typecheck: [0m
[33m@repo/packages-utils:typecheck: [0m> @repo/packages-utils@1.0.0 typecheck /Users/arman/Github/arawn/packages/utils
[33m@repo/packages-utils:typecheck: [0m> tsc --noEmit
[33m@repo/packages-utils:typecheck: [0m
[35m@repo/packages-utils:build: [0mcache miss, executing [2mf6f77dc77bedd5e9[0m
[33m@repo/packages-types:build: [0mcache miss, executing [2mf83006c85d9f9b4c[0m
[35m@repo/packages-utils:build: [0m
[33m@repo/packages-types:build: [0m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m> @repo/packages-types@1.0.0 test /Users/arman/Github/arawn/packages/types
[34m@repo/packages-types:test: [0m> vitest run
[34m@repo/packages-types:test: [0m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m> @repo/packages-utils@1.0.0 test /Users/arman/Github/arawn/packages/utils
[32m@repo/packages-utils:test: [0m> vitest run
[32m@repo/packages-utils:test: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 build /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> pnpm update-exports && tsup
[35m@repo/packages-utils:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 build /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> pnpm update-exports && tsup
[33m@repo/packages-types:build: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 update-exports /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> tsx ../../config/update-exports.ts .
[35m@repo/packages-utils:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 update-exports /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> tsx ../../config/update-exports.ts .
[33m@repo/packages-types:build: [0m
[32m@repo/packages-utils:test: [0m[?25l
[34m@repo/packages-types:test: [0m[?25l
[32m@repo/packages-utils:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/packages/utils[39m
[32m@repo/packages-utils:test: [0m
[34m@repo/packages-types:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/packages/types[39m
[34m@repo/packages-types:test: [0m
[33m@repo/packages-types:build: [0mâœ… Updated exports in package.json
[33m@repo/packages-types:build: [0m   Entry points: index, api-response, health-check, pagination, role, user
[35m@repo/packages-utils:build: [0mâœ… Updated exports in package.json
[35m@repo/packages-utils:build: [0m   Entry points: index, array, async, date, errors, number, response, string
[34m@repo/packages-types:test: [0m[?2026h
[34m@repo/packages-types:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-types [49m[39m src/__tests__/schemas.test.ts[2m [queued][22m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[34m@repo/packages-types:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[34m@repo/packages-types:test: [0m[2m   Start at [22m13:17:39
[34m@repo/packages-types:test: [0m[2m   Duration [22m301ms
[32m@repo/packages-utils:test: [0m[?2026h
[32m@repo/packages-utils:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts[2m [queued][22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m304ms
[34m@repo/packages-types:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/packages-types [49m[39m src/__tests__/schemas.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould validate a valid health check object[32m 2[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject invalid status[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject negative uptime[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject invalid environment[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould validate a valid user object with Date[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould validate a valid user object with ISO string dates[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject invalid CUID[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject invalid email[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject empty name[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould validate user creation without id and timestamps[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould omit id, createdAt, and updatedAt fields[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould reject invalid email in create[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m MessageResponseSchema[2m > [22mshould validate message response[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m MessageResponseSchema[2m > [22mshould reject response without message field[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m ListResponseSchema[2m > [22mshould validate list response with data array[32m 1[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m ListResponseSchema[2m > [22mshould reject response without data field[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[34m@repo/packages-types:test: [0m[2m      Tests [22m [1m[32m16 passed[39m[22m[90m (16)[39m
[34m@repo/packages-types:test: [0m[2m   Start at [22m 13:17:39
[34m@repo/packages-types:test: [0m[2m   Duration [22m 475ms[2m (transform 54ms, setup 0ms, collect 89ms, tests 7ms, environment 0ms, prepare 116ms)[22m
[34m@repo/packages-types:test: [0m
[32m@repo/packages-utils:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[32m@repo/packages-utils:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts[2m 1/37[22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (37)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m505ms
[32m@repo/packages-utils:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 87[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould convert text to slug format[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle special characters[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle multiple spaces and trim[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle underscores[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould truncate text longer than maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould not truncate text shorter than maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould return text as-is when exactly maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDate[2m > [22mshould format Date object to YYYY-MM-DD[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDate[2m > [22mshould format ISO string to YYYY-MM-DD[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDateTime[2m > [22mshould format Date object to localized string[32m 16[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDateTime[2m > [22mshould format ISO string to localized string[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return "just now" for recent dates[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return minutes ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return hours ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return days ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return formatted date for old dates[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m sleep[2m > [22mshould resolve after specified milliseconds[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould succeed on first attempt[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould retry on failure and eventually succeed[32m 32[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould throw error after max attempts[32m 32[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format zero bytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format bytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format kilobytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format megabytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format gigabytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould respect decimals parameter[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp value within range[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp to minimum[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp to maximum[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould handle negative ranges[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould remove duplicates from array[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould work with strings[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould return empty array for empty input[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould preserve single item arrays[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould group objects by key function[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould work with string keys[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould handle empty array[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m [1m[32m37 passed[39m[22m[90m (37)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m 13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m 576ms[2m (transform 56ms, setup 0ms, collect 68ms, tests 87ms, environment 0ms, prepare 120ms)[22m
[32m@repo/packages-utils:test: [0m
[34m@repo/packages-types:test: [0m[?25h
[33m@repo/packages-types:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","api-response":"src/api-response.ts","health-check":"src/health-check.ts","pagination":"src/pagination.ts","role":"src/role.ts","user":"src/user.ts"}
[35m@repo/packages-utils:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","array":"src/array.ts","async":"src/async.ts","date":"src/date.ts","errors":"src/errors.ts","number":"src/number.ts","response":"src/response.ts","string":"src/string.ts"}
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[35m@repo/packages-utils:build: [0m[34mCLI[39m tsup v8.5.0
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/utils/tsup.config.ts
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[33m@repo/packages-types:build: [0m[34mCLI[39m tsup v8.5.0
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/types/tsup.config.ts
[33m@repo/packages-types:build: [0m[34mCLI[39m Target: es2022
[35m@repo/packages-utils:build: [0m[34mCLI[39m Target: es2022
[33m@repo/packages-types:build: [0m[34mCLI[39m Cleaning output folder
[33m@repo/packages-types:build: [0m[34mCJS[39m Build start
[35m@repo/packages-utils:build: [0m[34mCLI[39m Cleaning output folder
[35m@repo/packages-utils:build: [0m[34mCJS[39m Build start
[35m@repo/packages-utils:build: [0m[34mESM[39m Build start
[33m@repo/packages-types:build: [0m[34mESM[39m Build start
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js     [22m[32m803.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js            [22m[32m2.70 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js             [22m[32m919.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js     [22m[32m451.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js             [22m[32m219.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js       [22m[32m999.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js.map        [22m[32m6.58 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js.map [22m[32m810.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js.map         [22m[32m331.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js.map   [22m[32m2.17 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js.map [22m[32m1.92 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs     [22m[32m396.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs             [22m[32m769.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs             [22m[32m191.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs            [22m[32m2.18 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs       [22m[32m856.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs     [22m[32m629.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs.map [22m[32m800.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs.map         [22m[32m326.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs.map        [22m[32m6.57 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs.map   [22m[32m2.15 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs.map [22m[32m1.90 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m âš¡ï¸ Build success in 90ms
[32m@repo/packages-utils:test: [0m[?25h
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs         [22m[32m1002.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs       [22m[32m491.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs        [22m[32m381.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs       [22m[32m387.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs        [22m[32m527.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs     [22m[32m451.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs       [22m[32m1.56 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs        [22m[32m4.26 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs.map   [22m[32m824.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs.map    [22m[32m930.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m âš¡ï¸ Build success in 133ms
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js        [22m[32m418.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js        [22m[32m561.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js         [22m[32m1.05 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js       [22m[32m1.76 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js     [22m[32m525.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js       [22m[32m426.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js        [22m[32m4.74 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js       [22m[32m531.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js.map    [22m[32m931.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js.map   [22m[32m825.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m âš¡ï¸ Build success in 135ms
[33m@repo/packages-types:build: [0mDTS Build start
[35m@repo/packages-utils:build: [0mDTS Build start
[35m@repo/packages-utils:build: [0mDTS âš¡ï¸ Build success in 601ms
[35m@repo/packages-utils:build: [0mDTS dist/index.d.ts     488.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.ts     190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.ts     178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.ts      240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.ts    1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.ts    177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.ts  1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.ts    147.00 B
[35m@repo/packages-utils:build: [0mDTS dist/index.d.mts    495.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.mts    190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.mts    178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.mts     240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.mts   1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.mts   177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.mts 1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.mts   147.00 B
[33m@repo/packages-types:build: [0mDTS âš¡ï¸ Build success in 694ms
[33m@repo/packages-types:build: [0mDTS dist/index.d.ts         606.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.ts  1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.ts  483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.ts    1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.ts          213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.ts          1.30 KB
[33m@repo/packages-types:build: [0mDTS dist/index.d.mts        611.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.mts 1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.mts 483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.mts   1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.mts         213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.mts         1.30 KB
[32m@repo/frontend:test: [0mcache miss, executing [2m97dfe77b100788be[0m
[35m@repo/api:test: [0mcache miss, executing [2m17ea505025d38b9b[0m
[32m@repo/frontend:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m> @repo/api@1.0.0 test /Users/arman/Github/arawn/apps/api
[35m@repo/api:test: [0m> vitest run
[35m@repo/api:test: [0m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m> @repo/frontend@1.0.0 test /Users/arman/Github/arawn/apps/frontend
[32m@repo/frontend:test: [0m> vitest run
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?25l
[32m@repo/frontend:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/frontend[39m
[32m@repo/frontend:test: [0m
[35m@repo/api:test: [0m[?25l
[35m@repo/api:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/api[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?2026h
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m [queued][22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m207ms
[32m@repo/frontend:test: [0m[?2026h
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m514ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/lib/__tests__/utils.test.ts[2m 0/5[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (5)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m615ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/lib/__tests__/utils.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m 0/8[22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx[2m 1/6[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m6 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m815ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 177[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m 4/8[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m15 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m915ms
[32m@repo/frontend:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 173[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m [1m[32m19 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m 13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m 947ms[2m (transform 87ms, setup 442ms, collect 169ms, tests 355ms, environment 1.01s, prepare 145ms)[22m
[32m@repo/frontend:test: [0m
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 0/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m913ms
[32m@repo/frontend:test: [0m[?25h
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m1.11s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m1.11s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m1.11s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [31mâ¯[39m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts [2m([22m[2m11 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 882[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould return empty paginated response initially[32m 2[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould return paginated users[32m 1[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould handle pagination correctly[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould filter users by search query[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUserById[2m > [22mshould return user by ID[32m 1[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mgetUserById[2m > [22mshould return null when user not found[39m[32m 2[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ User not found[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mcreateUser[2m > [22mshould create a new user[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mupdateUser[2m > [22mshould update user successfully[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mupdateUser[2m > [22mshould return null when user not found[39m[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ User not found[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mdeleteUser[2m > [22mshould delete user successfully[39m[32m 1[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ expected undefined to be true // Object.is equality[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mdeleteUser[2m > [22mshould return false when user not found[39m[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ User not found[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m1.32s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m1.92s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m2.23s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 2/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m9 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m2.43s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 4/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m2.63s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 6/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m2.73s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 7/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m14 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m2.93s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 8/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m15 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m3.34s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 9/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m16 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m3.44s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 10/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m3.54s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m3.64s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 2294[2mms[22m[39m
[35m@repo/api:test: [0m   [33m[2mâœ“[22m[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould maintain data consistency on concurrent password changes [33m 420[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m3.64s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m3.94s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 1/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m18 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m4.35s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 2/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m4.55s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m4.75s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m4.75s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 1027[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m31 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m4.95s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m5.46s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m5.46s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m5.46s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 660[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m41 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m5.56s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m41 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m5.96s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m6.26s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m6.26s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m6.26s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 652[2mms[22m[39m
[35m@repo/api:test: [0mPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m54 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m6.87s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m54 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m6.87s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m54 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m6.87s
[35m@repo/api:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 583[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 4 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mgetUserById[2m > [22mshould return null when user not found
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: User not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.getUserById src/services/users.service.ts:[2m61:13[22m[39m
[35m@repo/api:test: [0m    [90m 59| [39m    [35mif[39m ([33m![39muser) {
[35m@repo/api:test: [0m    [90m 60| [39m      [35mthis[39m[33m.[39mlogger[33m.[39m[34mwarn[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m 61| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m 62| [39m    }
[35m@repo/api:test: [0m    [90m 63| [39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m src/services/users.service.spec.ts:[2m132:20[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mupdateUser[2m > [22mshould return null when user not found
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: User not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.updateUser src/services/users.service.ts:[2m90:13[22m[39m
[35m@repo/api:test: [0m    [90m 88| [39m    [35mif[39m ([33m![39muser) {
[35m@repo/api:test: [0m    [90m 89| [39m      [35mthis[39m[33m.[39mlogger[33m.[39m[34mwarn[39m([32m'User not found for update'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m 90| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m 91| [39m    }
[35m@repo/api:test: [0m    [90m 92| [39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m src/services/users.service.spec.ts:[2m201:20[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mdeleteUser[2m > [22mshould delete user successfully
[35m@repo/api:test: [0m[31m[1mAssertionError[22m: expected undefined to be true // Object.is equality[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[32m- Expected:[39m 
[35m@repo/api:test: [0mtrue
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m+ Received:[39m 
[35m@repo/api:test: [0mundefined
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[36m [2mâ¯[22m src/services/users.service.spec.ts:[2m230:22[22m[39m
[35m@repo/api:test: [0m    [90m228| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdeleteUser[39m([32m'1'[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m229| [39m
[35m@repo/api:test: [0m    [90m230| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m                     [31m^[39m
[35m@repo/api:test: [0m    [90m231| [39m      [34mexpect[39m(prisma[33m.[39muser[33m.[39m[35mdelete[39m)[33m.[39m[34mtoHaveBeenCalledWith[39m({
[35m@repo/api:test: [0m    [90m232| [39m        where[33m:[39m { id[33m:[39m [32m'1'[39m }[33m,[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mdeleteUser[2m > [22mshould return false when user not found
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: User not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.deleteUser src/services/users.service.ts:[2m111:13[22m[39m
[35m@repo/api:test: [0m    [90m109| [39m    [35mif[39m ([33m![39muser) {
[35m@repo/api:test: [0m    [90m110| [39m      [35mthis[39m[33m.[39mlogger[33m.[39m[34mwarn[39m([32m'User not found for deletion'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m111| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m112| [39m    }
[35m@repo/api:test: [0m    [90m113| [39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m src/services/users.service.spec.ts:[2m239:22[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m61 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m 13:17:41
[35m@repo/api:test: [0m[2m   Duration [22m 6.96s[2m (transform 78ms, setup 103ms, collect 75ms, tests 6.10s, environment 0ms, prepare 168ms)[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?25h[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mTest failed. See above for more details.[39m
[35m@repo/api:test: [0mERROR: command finished with error: command (/Users/arman/Github/arawn/apps/api) /Users/arman/.nvm/versions/node/v22.17.0/bin/pnpm run test exited (1)
@repo/api#test: command (/Users/arman/Github/arawn/apps/api) /Users/arman/.nvm/versions/node/v22.17.0/bin/pnpm run test exited (1)

[1m Tasks:    [32m[1m7 successful[0m, 8 total[0m
[1mCached:    [1m2 cached[0m, 8 total[0m
[1m  Time:    [1m9.366s[0m [0m
[1mFailed:    [31m[1m@repo/api#test[0m[0m

    ...Finishing writing to cache...                                                                                                             [33;40m WARNING [0m [33;49mno output files found for task @repo/frontend#test. Please check your `outputs` key in `turbo.json`[0m
[2K[2m>  [0m ...Finishing writing to cache...                                                                                                             [33;40m WARNING [0m [33;49mno output files found for task @repo/packages-types#test. Please check your `outputs` key in `turbo.json`[0m
[33;40m WARNING [0m [33;49mno output files found for task @repo/packages-utils#test. Please check your `outputs` key in `turbo.json`[0m
[2K[31;40m ERROR [0m [31;49mrun failed: command  exited (1)[0m
[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mTest failed. See above for more details.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0mtook [1;33m10s[0m 
[1;31mâ¯[0m [K[?1h=[?2004hc[?1l>[?2004l
]2;echo -e "\033c"]1;cc
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;32mâ¯[0m [K[?1h=[?2004hpp[90mnpm test[39m[8Dp[39mn[39mp[39mm[39m [39mt[39me[39ms[39mt:[90mintegration[39m[11D[39mi[39mn[39mt[39me[39mg[39mr[39ma[39mt[39mi[39mo[39mn[?1l>[?2004l
]2;pnpm test:integration]1;pnpm
> arawn-monorepo@1.0.0 test:integration /Users/arman/Github/arawn
> turbo run test:integration

[2mturbo 2.6.1[0m

[2mâ€¢ Packages in scope: @repo/api, @repo/frontend, @repo/packages-types, @repo/packages-utils[0m
[2mâ€¢ Running [0m[1m[2mtest:integration[0m[2m in 4 packages
[0m[2mâ€¢ Remote caching disabled[0m
[33m@repo/packages-utils:typecheck: [0mcache hit (outputs already on disk), replaying logs [2m097981c7dc4c46c0[0m
[36m@repo/packages-types:typecheck: [0mcache hit (outputs already on disk), replaying logs [2me57fbb71198ab7a0[0m
[33m@repo/packages-utils:typecheck: [0m
[33m@repo/packages-utils:typecheck: [0m> @repo/packages-utils@1.0.0 typecheck /Users/arman/Github/arawn/packages/utils
[33m@repo/packages-utils:typecheck: [0m> tsc --noEmit
[33m@repo/packages-utils:typecheck: [0m
[36m@repo/packages-types:typecheck: [0m
[36m@repo/packages-types:typecheck: [0m> @repo/packages-types@1.0.0 typecheck /Users/arman/Github/arawn/packages/types
[36m@repo/packages-types:typecheck: [0m> tsc --noEmit
[36m@repo/packages-types:typecheck: [0m
[32m@repo/packages-utils:test:integration: [0mcache hit, replaying logs [2m30b97c7a7b0ae743[0m
[32m@repo/packages-utils:test:integration: [0m
[32m@repo/packages-utils:test:integration: [0m> @repo/packages-utils@1.0.0 test:integration /Users/arman/Github/arawn/packages/utils
[32m@repo/packages-utils:test:integration: [0m> echo 'No integration tests for packages-utils'
[32m@repo/packages-utils:test:integration: [0m
[32m@repo/packages-utils:test:integration: [0mNo integration tests for packages-utils
[34m@repo/packages-types:test:integration: [0mcache hit, replaying logs [2meb99895416655835[0m
[34m@repo/packages-types:test:integration: [0m
[34m@repo/packages-types:test:integration: [0m> @repo/packages-types@1.0.0 test:integration /Users/arman/Github/arawn/packages/types
[34m@repo/packages-types:test:integration: [0m> echo 'No integration tests for packages-types'
[34m@repo/packages-types:test:integration: [0m
[34m@repo/packages-types:test:integration: [0mNo integration tests for packages-types
[33m@repo/packages-types:build: [0mcache hit, replaying logs [2mf83006c85d9f9b4c[0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 build /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> pnpm update-exports && tsup
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 update-exports /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> tsx ../../config/update-exports.ts .
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0mâœ… Updated exports in package.json
[33m@repo/packages-types:build: [0m   Entry points: index, api-response, health-check, pagination, role, user
[33m@repo/packages-types:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","api-response":"src/api-response.ts","health-check":"src/health-check.ts","pagination":"src/pagination.ts","role":"src/role.ts","user":"src/user.ts"}
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[33m@repo/packages-types:build: [0m[34mCLI[39m tsup v8.5.0
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/types/tsup.config.ts
[33m@repo/packages-types:build: [0m[34mCLI[39m Target: es2022
[33m@repo/packages-types:build: [0m[34mCLI[39m Cleaning output folder
[33m@repo/packages-types:build: [0m[34mCJS[39m Build start
[33m@repo/packages-types:build: [0m[34mESM[39m Build start
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js     [22m[32m803.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js            [22m[32m2.70 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js             [22m[32m919.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js     [22m[32m451.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js             [22m[32m219.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js       [22m[32m999.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js.map        [22m[32m6.58 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js.map [22m[32m810.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js.map         [22m[32m331.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js.map   [22m[32m2.17 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js.map [22m[32m1.92 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs     [22m[32m396.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs             [22m[32m769.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs             [22m[32m191.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs            [22m[32m2.18 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs       [22m[32m856.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs     [22m[32m629.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs.map [22m[32m800.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs.map         [22m[32m326.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs.map        [22m[32m6.57 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs.map   [22m[32m2.15 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs.map [22m[32m1.90 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0mDTS Build start
[33m@repo/packages-types:build: [0mDTS âš¡ï¸ Build success in 694ms
[33m@repo/packages-types:build: [0mDTS dist/index.d.ts         606.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.ts  1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.ts  483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.ts    1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.ts          213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.ts          1.30 KB
[33m@repo/packages-types:build: [0mDTS dist/index.d.mts        611.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.mts 1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.mts 483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.mts   1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.mts         213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.mts         1.30 KB
[35m@repo/packages-utils:build: [0mcache hit, replaying logs [2mf6f77dc77bedd5e9[0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 build /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> pnpm update-exports && tsup
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 update-exports /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> tsx ../../config/update-exports.ts .
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0mâœ… Updated exports in package.json
[35m@repo/packages-utils:build: [0m   Entry points: index, array, async, date, errors, number, response, string
[35m@repo/packages-utils:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","array":"src/array.ts","async":"src/async.ts","date":"src/date.ts","errors":"src/errors.ts","number":"src/number.ts","response":"src/response.ts","string":"src/string.ts"}
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[35m@repo/packages-utils:build: [0m[34mCLI[39m tsup v8.5.0
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/utils/tsup.config.ts
[35m@repo/packages-utils:build: [0m[34mCLI[39m Target: es2022
[35m@repo/packages-utils:build: [0m[34mCLI[39m Cleaning output folder
[35m@repo/packages-utils:build: [0m[34mCJS[39m Build start
[35m@repo/packages-utils:build: [0m[34mESM[39m Build start
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs         [22m[32m1002.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs       [22m[32m491.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs        [22m[32m381.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs       [22m[32m387.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs        [22m[32m527.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs     [22m[32m451.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs       [22m[32m1.56 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs        [22m[32m4.26 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs.map   [22m[32m824.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs.map    [22m[32m930.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m âš¡ï¸ Build success in 133ms
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js        [22m[32m418.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js        [22m[32m561.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js         [22m[32m1.05 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js       [22m[32m1.76 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js     [22m[32m525.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js       [22m[32m426.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js        [22m[32m4.74 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js       [22m[32m531.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js.map    [22m[32m931.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js.map   [22m[32m825.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m âš¡ï¸ Build success in 135ms
[35m@repo/packages-utils:build: [0mDTS Build start
[35m@repo/packages-utils:build: [0mDTS âš¡ï¸ Build success in 601ms
[35m@repo/packages-utils:build: [0mDTS dist/index.d.ts     488.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.ts     190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.ts     178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.ts      240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.ts    1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.ts    177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.ts  1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.ts    147.00 B
[35m@repo/packages-utils:build: [0mDTS dist/index.d.mts    495.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.mts    190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.mts    178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.mts     240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.mts   1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.mts   177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.mts 1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.mts   147.00 B
[35m@repo/api:test:integration: [0mcache miss, executing [2mf969239d94c80046[0m
[32m@repo/frontend:test:integration: [0mcache miss, executing [2mac7032e15e86dc84[0m
[35m@repo/api:test:integration: [0m
[32m@repo/frontend:test:integration: [0m
[32m@repo/frontend:test:integration: [0m
[32m@repo/frontend:test:integration: [0m> @repo/frontend@1.0.0 test:integration /Users/arman/Github/arawn/apps/frontend
[32m@repo/frontend:test:integration: [0m> echo 'No integration tests for frontend'
[32m@repo/frontend:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m> @repo/api@1.0.0 test:integration /Users/arman/Github/arawn/apps/api
[35m@repo/api:test:integration: [0m> vitest run test/integration/
[35m@repo/api:test:integration: [0m
[32m@repo/frontend:test:integration: [0mNo integration tests for frontend
[35m@repo/api:test:integration: [0m[?25l
[35m@repo/api:test:integration: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/api[39m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[?2026h
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m [queued][22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m0ms
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test:integration: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m5 migrations found in prisma/migrations
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0mNo pending migrations to apply.
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m906ms
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 2/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m2 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m1.31s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 4/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m4 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m1.41s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 6/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m6 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m1.51s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 7/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m7 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m1.71s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 7/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m7 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m1.91s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 8/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m8 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m2.22s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 9/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m9 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m2.32s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 10/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m10 passed[39m[22m[90m (10)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m2.42s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test:integration: [0m[90mstderr[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m10 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m2.52s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 2327[2mms[22m[39m
[35m@repo/api:test:integration: [0m   [33m[2mâœ“[22m[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould maintain data consistency on concurrent password changes [33m 423[2mms[22m[39m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m10 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m2.52s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m10 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m2.92s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test:integration: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m5 migrations found in prisma/migrations
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0mNo pending migrations to apply.
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 1/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m11 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m3.22s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 2/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m12 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m3.33s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test:integration: [0m[90mstderr[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m22 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m3.53s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m22 passed[39m[22m[90m (24)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m3.53s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 1030[2mms[22m[39m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m24 passed[39m[22m[90m (34)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m3.63s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m24 passed[39m[22m[90m (34)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m3.93s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test:integration: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m5 migrations found in prisma/migrations
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0mNo pending migrations to apply.
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m25 passed[39m[22m[90m (34)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m4.33s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test:integration: [0m[90mstderr[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m25 passed[39m[22m[90m (34)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m4.33s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m25 passed[39m[22m[90m (34)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m4.33s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 670[2mms[22m[39m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m34 passed[39m[22m[90m (46)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m4.43s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test:integration: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m34 passed[39m[22m[90m (46)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m4.94s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test:integration: [0m5 migrations found in prisma/migrations
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0mNo pending migrations to apply.
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m35 passed[39m[22m[90m (46)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m5.04s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test:integration: [0m[90mstderr[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m35 passed[39m[22m[90m (46)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m5.04s
[35m@repo/api:test:integration: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test:integration: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m[1m[32m3 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m[1m[32m35 passed[39m[22m[90m (46)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m5.04s
[35m@repo/api:test:integration: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 658[2mms[22m[39m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[2m Test Files [22m [1m[32m4 passed[39m[22m[90m (4)[39m
[35m@repo/api:test:integration: [0m[2m      Tests [22m [1m[32m46 passed[39m[22m[90m (46)[39m
[35m@repo/api:test:integration: [0m[2m   Start at [22m 13:17:52
[35m@repo/api:test:integration: [0m[2m   Duration [22m 5.14s[2m (transform 52ms, setup 56ms, collect 53ms, tests 4.68s, environment 0ms, prepare 99ms)[22m
[35m@repo/api:test:integration: [0m
[35m@repo/api:test:integration: [0m[?25h

[1m Tasks:    [32m[1m8 successful[0m, 8 total[0m
[1mCached:    [1m6 cached[0m, 8 total[0m
[1m  Time:    [1m5.655s[0m [0m

    ...Finishing writing to cache...                                                                                                             [2K[2m>  [0m ...Finishing writing to cache...                                                                                                             [33;40m WARNING [0m [33;49mno output files found for task @repo/api#test:integration. Please check your `outputs` key in `turbo.json`[0m
[33;40m WARNING [0m [33;49mno output files found for task @repo/frontend#test:integration. Please check your `outputs` key in `turbo.json`[0m
[2K[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0mtook [1;33m6s[0m 
[1;32mâ¯[0m [K[?1h=[?2004hpp[90mnpm test:integration[39m[20Dp[39mn[39mp[39mm[39m [39mt[39mp[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [14Dnp   [90mest:integration[39m[15D[39me[39ms[39mt[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [12D[?1l>[?2004l
]2;pnpm test]1;pnpm
> arawn-monorepo@1.0.0 test /Users/arman/Github/arawn
> turbo run test

[2mturbo 2.6.1[0m

[2mâ€¢ Packages in scope: @repo/api, @repo/frontend, @repo/packages-types, @repo/packages-utils[0m
[2mâ€¢ Running [0m[1m[2mtest[0m[2m in 4 packages
[0m[2mâ€¢ Remote caching disabled[0m
[36m@repo/packages-types:typecheck: [0mcache hit (outputs already on disk), replaying logs [2me57fbb71198ab7a0[0m
[33m@repo/packages-utils:typecheck: [0mcache hit (outputs already on disk), replaying logs [2m097981c7dc4c46c0[0m
[36m@repo/packages-types:typecheck: [0m
[36m@repo/packages-types:typecheck: [0m> @repo/packages-types@1.0.0 typecheck /Users/arman/Github/arawn/packages/types
[36m@repo/packages-types:typecheck: [0m> tsc --noEmit
[36m@repo/packages-types:typecheck: [0m
[33m@repo/packages-utils:typecheck: [0m
[33m@repo/packages-utils:typecheck: [0m> @repo/packages-utils@1.0.0 typecheck /Users/arman/Github/arawn/packages/utils
[33m@repo/packages-utils:typecheck: [0m> tsc --noEmit
[33m@repo/packages-utils:typecheck: [0m
[34m@repo/packages-types:test: [0mcache hit, replaying logs [2m1b71ed176f12cea1[0m
[32m@repo/packages-utils:test: [0mcache hit, replaying logs [2m8c304f39903a7344[0m
[35m@repo/packages-utils:build: [0mcache hit (outputs already on disk), replaying logs [2mf6f77dc77bedd5e9[0m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m> @repo/packages-utils@1.0.0 test /Users/arman/Github/arawn/packages/utils
[32m@repo/packages-utils:test: [0m> vitest run
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[?25l
[32m@repo/packages-utils:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/packages/utils[39m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[?2026h
[32m@repo/packages-utils:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts[2m [queued][22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m304ms
[32m@repo/packages-utils:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[32m@repo/packages-utils:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts[2m 1/37[22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (37)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m505ms
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m
[32m@repo/packages-utils:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 87[2mms[22m[39m
[34m@repo/packages-types:test: [0m> @repo/packages-types@1.0.0 test /Users/arman/Github/arawn/packages/types
[34m@repo/packages-types:test: [0m> vitest run
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould convert text to slug format[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle special characters[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle multiple spaces and trim[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle underscores[32m 0[2mms[22m[39m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 build /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> pnpm update-exports && tsup
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 update-exports /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> tsx ../../config/update-exports.ts .
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0mâœ… Updated exports in package.json
[35m@repo/packages-utils:build: [0m   Entry points: index, array, async, date, errors, number, response, string
[35m@repo/packages-utils:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","array":"src/array.ts","async":"src/async.ts","date":"src/date.ts","errors":"src/errors.ts","number":"src/number.ts","response":"src/response.ts","string":"src/string.ts"}
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[35m@repo/packages-utils:build: [0m[34mCLI[39m tsup v8.5.0
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/utils/tsup.config.ts
[35m@repo/packages-utils:build: [0m[34mCLI[39m Target: es2022
[35m@repo/packages-utils:build: [0m[34mCLI[39m Cleaning output folder
[35m@repo/packages-utils:build: [0m[34mCJS[39m Build start
[35m@repo/packages-utils:build: [0m[34mESM[39m Build start
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs         [22m[32m1002.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs       [22m[32m491.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs        [22m[32m381.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs       [22m[32m387.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs        [22m[32m527.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs     [22m[32m451.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs       [22m[32m1.56 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs        [22m[32m4.26 KB[39m
[34m@repo/packages-types:test: [0m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs.map   [22m[32m824.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs.map    [22m[32m930.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m âš¡ï¸ Build success in 133ms
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js        [22m[32m418.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js        [22m[32m561.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js         [22m[32m1.05 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js       [22m[32m1.76 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js     [22m[32m525.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js       [22m[32m426.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js        [22m[32m4.74 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js       [22m[32m531.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js.map    [22m[32m931.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js.map   [22m[32m825.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m âš¡ï¸ Build success in 135ms
[35m@repo/packages-utils:build: [0mDTS Build start
[35m@repo/packages-utils:build: [0mDTS âš¡ï¸ Build success in 601ms
[35m@repo/packages-utils:build: [0mDTS dist/index.d.ts     488.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.ts     190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.ts     178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.ts      240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.ts    1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.ts    177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.ts  1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.ts    147.00 B
[35m@repo/packages-utils:build: [0mDTS dist/index.d.mts    495.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.mts    190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.mts    178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.mts     240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.mts   1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.mts   177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.mts 1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.mts   147.00 B
[34m@repo/packages-types:test: [0m[?25l
[34m@repo/packages-types:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/packages/types[39m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[?2026h
[34m@repo/packages-types:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-types [49m[39m src/__tests__/schemas.test.ts[2m [queued][22m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[34m@repo/packages-types:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[34m@repo/packages-types:test: [0m[2m   Start at [22m13:17:39
[34m@repo/packages-types:test: [0m[2m   Duration [22m301ms
[34m@repo/packages-types:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/packages-types [49m[39m src/__tests__/schemas.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould validate a valid health check object[32m 2[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject invalid status[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject negative uptime[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject invalid environment[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould validate a valid user object with Date[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould validate a valid user object with ISO string dates[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject invalid CUID[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject invalid email[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject empty name[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould validate user creation without id and timestamps[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould omit id, createdAt, and updatedAt fields[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould reject invalid email in create[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m MessageResponseSchema[2m > [22mshould validate message response[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m MessageResponseSchema[2m > [22mshould reject response without message field[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m ListResponseSchema[2m > [22mshould validate list response with data array[32m 1[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m ListResponseSchema[2m > [22mshould reject response without data field[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[34m@repo/packages-types:test: [0m[2m      Tests [22m [1m[32m16 passed[39m[22m[90m (16)[39m
[34m@repo/packages-types:test: [0m[2m   Start at [22m 13:17:39
[34m@repo/packages-types:test: [0m[2m   Duration [22m 475ms[2m (transform 54ms, setup 0ms, collect 89ms, tests 7ms, environment 0ms, prepare 116ms)[22m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[?25h
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould truncate text longer than maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould not truncate text shorter than maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould return text as-is when exactly maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDate[2m > [22mshould format Date object to YYYY-MM-DD[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDate[2m > [22mshould format ISO string to YYYY-MM-DD[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDateTime[2m > [22mshould format Date object to localized string[32m 16[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDateTime[2m > [22mshould format ISO string to localized string[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return "just now" for recent dates[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return minutes ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return hours ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return days ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return formatted date for old dates[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m sleep[2m > [22mshould resolve after specified milliseconds[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould succeed on first attempt[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould retry on failure and eventually succeed[32m 32[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould throw error after max attempts[32m 32[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format zero bytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format bytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format kilobytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format megabytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format gigabytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould respect decimals parameter[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp value within range[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp to minimum[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp to maximum[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould handle negative ranges[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould remove duplicates from array[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould work with strings[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould return empty array for empty input[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould preserve single item arrays[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould group objects by key function[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould work with string keys[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould handle empty array[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m [1m[32m37 passed[39m[22m[90m (37)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m 13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m 576ms[2m (transform 56ms, setup 0ms, collect 68ms, tests 87ms, environment 0ms, prepare 120ms)[22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[?25h
[33m@repo/packages-types:build: [0mcache hit, replaying logs [2mf83006c85d9f9b4c[0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 build /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> pnpm update-exports && tsup
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 update-exports /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> tsx ../../config/update-exports.ts .
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0mâœ… Updated exports in package.json
[33m@repo/packages-types:build: [0m   Entry points: index, api-response, health-check, pagination, role, user
[33m@repo/packages-types:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","api-response":"src/api-response.ts","health-check":"src/health-check.ts","pagination":"src/pagination.ts","role":"src/role.ts","user":"src/user.ts"}
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[33m@repo/packages-types:build: [0m[34mCLI[39m tsup v8.5.0
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/types/tsup.config.ts
[33m@repo/packages-types:build: [0m[34mCLI[39m Target: es2022
[33m@repo/packages-types:build: [0m[34mCLI[39m Cleaning output folder
[33m@repo/packages-types:build: [0m[34mCJS[39m Build start
[33m@repo/packages-types:build: [0m[34mESM[39m Build start
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js     [22m[32m803.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js            [22m[32m2.70 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js             [22m[32m919.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js     [22m[32m451.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js             [22m[32m219.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js       [22m[32m999.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js.map        [22m[32m6.58 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js.map [22m[32m810.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js.map         [22m[32m331.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js.map   [22m[32m2.17 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js.map [22m[32m1.92 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs     [22m[32m396.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs             [22m[32m769.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs             [22m[32m191.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs            [22m[32m2.18 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs       [22m[32m856.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs     [22m[32m629.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs.map [22m[32m800.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs.map         [22m[32m326.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs.map        [22m[32m6.57 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs.map   [22m[32m2.15 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs.map [22m[32m1.90 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0mDTS Build start
[33m@repo/packages-types:build: [0mDTS âš¡ï¸ Build success in 694ms
[33m@repo/packages-types:build: [0mDTS dist/index.d.ts         606.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.ts  1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.ts  483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.ts    1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.ts          213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.ts          1.30 KB
[33m@repo/packages-types:build: [0mDTS dist/index.d.mts        611.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.mts 1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.mts 483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.mts   1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.mts         213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.mts         1.30 KB
[35m@repo/api:test: [0mcache miss, executing [2m17ea505025d38b9b[0m
[35m@repo/api:test: [0m
[32m@repo/frontend:test: [0mcache hit, replaying logs [2m97dfe77b100788be[0m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m> @repo/frontend@1.0.0 test /Users/arman/Github/arawn/apps/frontend
[32m@repo/frontend:test: [0m> vitest run
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?25l
[32m@repo/frontend:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/frontend[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?2026h
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m514ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/lib/__tests__/utils.test.ts[2m 0/5[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (5)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m615ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/lib/__tests__/utils.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m 0/8[22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx[2m 1/6[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m6 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m815ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 177[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m 4/8[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m15 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m915ms
[32m@repo/frontend:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 173[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m [1m[32m19 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m 13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m 947ms[2m (transform 87ms, setup 442ms, collect 169ms, tests 355ms, environment 1.01s, prepare 145ms)[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?25h
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m> @repo/api@1.0.0 test /Users/arman/Github/arawn/apps/api
[35m@repo/api:test: [0m> vitest run
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?25l
[35m@repo/api:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/api[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?2026h
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m [queued][22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m0ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m704ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m704ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (11)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m704ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [31mâ¯[39m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts [2m([22m[2m11 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 607[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould return empty paginated response initially[32m 2[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould return paginated users[32m 1[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould handle pagination correctly[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUsers[2m > [22mshould filter users by search query[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mgetUserById[2m > [22mshould return user by ID[32m 1[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mgetUserById[2m > [22mshould return null when user not found[39m[32m 2[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ User not found[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mcreateUser[2m > [22mshould create a new user[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService[2m > [22mupdateUser[2m > [22mshould update user successfully[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mupdateUser[2m > [22mshould return null when user not found[39m[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ User not found[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mdeleteUser[2m > [22mshould delete user successfully[39m[32m 1[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ expected undefined to be true // Object.is equality[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService[2m > [22mdeleteUser[2m > [22mshould return false when user not found[39m[32m 0[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ User not found[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m804ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m904ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m1.81s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m1.91s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 4/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m2.21s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 6/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m2.31s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 7/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m14 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m2.51s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 8/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m15 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m2.92s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 9/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m16 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m3.02s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 10/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (21)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m3.12s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m3.22s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 2350[2mms[22m[39m
[35m@repo/api:test: [0m   [33m[2mâœ“[22m[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould maintain data consistency on concurrent password changes [33m 422[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m3.22s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m17 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m3.93s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 2/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m4.23s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m4.33s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (35)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m4.33s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 1097[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m31 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m4.43s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m31 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m4.94s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m32 passed[39m[22m[90m (45)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 664[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m41 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.24s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.94s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.94s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 1/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (57)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m5.94s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 677[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 0/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m53 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m6.04s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m54 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m6.55s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m54 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m6.55s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m54 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m6.55s
[35m@repo/api:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 585[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 4 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mgetUserById[2m > [22mshould return null when user not found
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: User not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.getUserById src/services/users.service.ts:[2m61:13[22m[39m
[35m@repo/api:test: [0m    [90m 59| [39m    [35mif[39m ([33m![39muser) {
[35m@repo/api:test: [0m    [90m 60| [39m      [35mthis[39m[33m.[39mlogger[33m.[39m[34mwarn[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m 61| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m 62| [39m    }
[35m@repo/api:test: [0m    [90m 63| [39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m src/services/users.service.spec.ts:[2m132:20[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mupdateUser[2m > [22mshould return null when user not found
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: User not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.updateUser src/services/users.service.ts:[2m90:13[22m[39m
[35m@repo/api:test: [0m    [90m 88| [39m    [35mif[39m ([33m![39muser) {
[35m@repo/api:test: [0m    [90m 89| [39m      [35mthis[39m[33m.[39mlogger[33m.[39m[34mwarn[39m([32m'User not found for update'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m 90| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m 91| [39m    }
[35m@repo/api:test: [0m    [90m 92| [39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m src/services/users.service.spec.ts:[2m201:20[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mdeleteUser[2m > [22mshould delete user successfully
[35m@repo/api:test: [0m[31m[1mAssertionError[22m: expected undefined to be true // Object.is equality[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[32m- Expected:[39m 
[35m@repo/api:test: [0mtrue
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m+ Received:[39m 
[35m@repo/api:test: [0mundefined
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[36m [2mâ¯[22m src/services/users.service.spec.ts:[2m230:22[22m[39m
[35m@repo/api:test: [0m    [90m228| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdeleteUser[39m([32m'1'[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m229| [39m
[35m@repo/api:test: [0m    [90m230| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m                     [31m^[39m
[35m@repo/api:test: [0m    [90m231| [39m      [34mexpect[39m(prisma[33m.[39muser[33m.[39m[35mdelete[39m)[33m.[39m[34mtoHaveBeenCalledWith[39m({
[35m@repo/api:test: [0m    [90m232| [39m        where[33m:[39m { id[33m:[39m [32m'1'[39m }[33m,[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m > [22mUsersService[2m > [22mdeleteUser[2m > [22mshould return false when user not found
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: User not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.deleteUser src/services/users.service.ts:[2m111:13[22m[39m
[35m@repo/api:test: [0m    [90m109| [39m    [35mif[39m ([33m![39muser) {
[35m@repo/api:test: [0m    [90m110| [39m      [35mthis[39m[33m.[39mlogger[33m.[39m[34mwarn[39m([32m'User not found for deletion'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m111| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'User not found'[39m[33m,[39m { userId[33m:[39m id })[33m;[39m
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m112| [39m    }
[35m@repo/api:test: [0m    [90m113| [39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m src/services/users.service.spec.ts:[2m239:22[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m61 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m 13:18:06
[35m@repo/api:test: [0m[2m   Duration [22m 6.65s[2m (transform 53ms, setup 81ms, collect 67ms, tests 5.98s, environment 0ms, prepare 152ms)[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?25h[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mTest failed. See above for more details.[39m
[35m@repo/api:test: [0mERROR: command finished with error: command (/Users/arman/Github/arawn/apps/api) /Users/arman/.nvm/versions/node/v22.17.0/bin/pnpm run test exited (1)
@repo/api#test: command (/Users/arman/Github/arawn/apps/api) /Users/arman/.nvm/versions/node/v22.17.0/bin/pnpm run test exited (1)

[1m Tasks:    [32m[1m7 successful[0m, 8 total[0m
[1mCached:    [1m7 cached[0m, 8 total[0m
[1m  Time:    [1m7.141s[0m [0m
[1mFailed:    [31m[1m@repo/api#test[0m[0m

    ...Finishing writing to cache...                                                                                                             [2K[2m>  [0m ...Finishing writing to cache...                                                                                                             [2K[31;40m ERROR [0m [31;49mrun failed: command  exited (1)[0m
[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mTest failed. See above for more details.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0mtook [1;33m8s[0m 
[1;31mâ¯[0m [K[?1h=[?2004hc[?1l>[?2004l
]2;echo -e "\033c"]1;cc
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;32mâ¯[0m [K[?1h=[?2004hgg[90mitc[39m [39m [39m [39m pp[90mnpm test[39m[8Dp[39mn[39mp[39mm[39m [39mt[39me[39ms[39mt[?1l>[?2004l
]2;pnpm test]1;pnpm
> arawn-monorepo@1.0.0 test /Users/arman/Github/arawn
> turbo run test

[2mturbo 2.6.1[0m

[2mâ€¢ Packages in scope: @repo/api, @repo/frontend, @repo/packages-types, @repo/packages-utils[0m
[2mâ€¢ Running [0m[1m[2mtest[0m[2m in 4 packages
[0m[2mâ€¢ Remote caching disabled[0m
[34m@repo/packages-types:test: [0mcache hit (outputs already on disk), replaying logs [2m1b71ed176f12cea1[0m
[33m@repo/packages-utils:typecheck: [0mcache hit (outputs already on disk), replaying logs [2m097981c7dc4c46c0[0m
[36m@repo/packages-types:typecheck: [0mcache hit (outputs already on disk), replaying logs [2me57fbb71198ab7a0[0m
[32m@repo/packages-utils:test: [0mcache hit (outputs already on disk), replaying logs [2m8c304f39903a7344[0m
[33m@repo/packages-utils:typecheck: [0m
[33m@repo/packages-utils:typecheck: [0m> @repo/packages-utils@1.0.0 typecheck /Users/arman/Github/arawn/packages/utils
[33m@repo/packages-utils:typecheck: [0m> tsc --noEmit
[33m@repo/packages-utils:typecheck: [0m
[36m@repo/packages-types:typecheck: [0m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m> @repo/packages-types@1.0.0 test /Users/arman/Github/arawn/packages/types
[34m@repo/packages-types:test: [0m> vitest run
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[?25l
[34m@repo/packages-types:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/packages/types[39m
[34m@repo/packages-types:test: [0m
[32m@repo/packages-utils:test: [0m
[34m@repo/packages-types:test: [0m[?2026h
[34m@repo/packages-types:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-types [49m[39m src/__tests__/schemas.test.ts[2m [queued][22m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[34m@repo/packages-types:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[36m@repo/packages-types:typecheck: [0m> @repo/packages-types@1.0.0 typecheck /Users/arman/Github/arawn/packages/types
[36m@repo/packages-types:typecheck: [0m> tsc --noEmit
[36m@repo/packages-types:typecheck: [0m
[34m@repo/packages-types:test: [0m[2m   Start at [22m13:17:39
[34m@repo/packages-types:test: [0m[2m   Duration [22m301ms
[34m@repo/packages-types:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/packages-types [49m[39m src/__tests__/schemas.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 7[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould validate a valid health check object[32m 2[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject invalid status[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject negative uptime[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m> @repo/packages-utils@1.0.0 test /Users/arman/Github/arawn/packages/utils
[32m@repo/packages-utils:test: [0m> vitest run
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[?25l
[32m@repo/packages-utils:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/packages/utils[39m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[?2026h
[32m@repo/packages-utils:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts[2m [queued][22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m304ms
[32m@repo/packages-utils:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[32m@repo/packages-utils:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts[2m 1/37[22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (37)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m505ms
[32m@repo/packages-utils:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/packages-utils [49m[39m src/__tests__/utils.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 87[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould convert text to slug format[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle special characters[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle multiple spaces and trim[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m slugify[2m > [22mshould handle underscores[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould truncate text longer than maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould not truncate text shorter than maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m truncate[2m > [22mshould return text as-is when exactly maxLength[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDate[2m > [22mshould format Date object to YYYY-MM-DD[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDate[2m > [22mshould format ISO string to YYYY-MM-DD[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDateTime[2m > [22mshould format Date object to localized string[32m 16[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatDateTime[2m > [22mshould format ISO string to localized string[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return "just now" for recent dates[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return minutes ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return hours ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return days ago[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m getRelativeTime[2m > [22mshould return formatted date for old dates[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m sleep[2m > [22mshould resolve after specified milliseconds[32m 1[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould succeed on first attempt[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould retry on failure and eventually succeed[32m 32[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m retry[2m > [22mshould throw error after max attempts[32m 32[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format zero bytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format bytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format kilobytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format megabytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould format gigabytes[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m formatBytes[2m > [22mshould respect decimals parameter[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp value within range[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp to minimum[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould clamp to maximum[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m clamp[2m > [22mshould handle negative ranges[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould remove duplicates from array[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould work with strings[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould return empty array for empty input[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m unique[2m > [22mshould preserve single item arrays[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould group objects by key function[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould work with string keys[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m   [32mâœ“[39m groupBy[2m > [22mshould handle empty array[32m 0[2mms[22m[39m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[32m@repo/packages-utils:test: [0m[2m      Tests [22m [1m[32m37 passed[39m[22m[90m (37)[39m
[32m@repo/packages-utils:test: [0m[2m   Start at [22m 13:17:39
[32m@repo/packages-utils:test: [0m[2m   Duration [22m 576ms[2m (transform 56ms, setup 0ms, collect 68ms, tests 87ms, environment 0ms, prepare 120ms)[22m
[32m@repo/packages-utils:test: [0m
[32m@repo/packages-utils:test: [0m[?25h
[34m@repo/packages-types:test: [0m   [32mâœ“[39m HealthCheckSchema[2m > [22mshould reject invalid environment[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould validate a valid user object with Date[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould validate a valid user object with ISO string dates[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject invalid CUID[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject invalid email[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m UserSchema[2m > [22mshould reject empty name[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould validate user creation without id and timestamps[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould omit id, createdAt, and updatedAt fields[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m CreateUserSchema[2m > [22mshould reject invalid email in create[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m MessageResponseSchema[2m > [22mshould validate message response[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m MessageResponseSchema[2m > [22mshould reject response without message field[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m ListResponseSchema[2m > [22mshould validate list response with data array[32m 1[2mms[22m[39m
[34m@repo/packages-types:test: [0m   [32mâœ“[39m ListResponseSchema[2m > [22mshould reject response without data field[32m 0[2mms[22m[39m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[34m@repo/packages-types:test: [0m[2m      Tests [22m [1m[32m16 passed[39m[22m[90m (16)[39m
[34m@repo/packages-types:test: [0m[2m   Start at [22m 13:17:39
[34m@repo/packages-types:test: [0m[2m   Duration [22m 475ms[2m (transform 54ms, setup 0ms, collect 89ms, tests 7ms, environment 0ms, prepare 116ms)[22m
[34m@repo/packages-types:test: [0m
[34m@repo/packages-types:test: [0m[?25h
[35m@repo/packages-utils:build: [0mcache hit (outputs already on disk), replaying logs [2mf6f77dc77bedd5e9[0m
[33m@repo/packages-types:build: [0mcache hit (outputs already on disk), replaying logs [2mf83006c85d9f9b4c[0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 build /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> pnpm update-exports && tsup
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0m> @repo/packages-types@1.0.0 update-exports /Users/arman/Github/arawn/packages/types
[33m@repo/packages-types:build: [0m> tsx ../../config/update-exports.ts .
[33m@repo/packages-types:build: [0m
[33m@repo/packages-types:build: [0mâœ… Updated exports in package.json
[33m@repo/packages-types:build: [0m   Entry points: index, api-response, health-check, pagination, role, user
[33m@repo/packages-types:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","api-response":"src/api-response.ts","health-check":"src/health-check.ts","pagination":"src/pagination.ts","role":"src/role.ts","user":"src/user.ts"}
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[33m@repo/packages-types:build: [0m[34mCLI[39m tsup v8.5.0
[33m@repo/packages-types:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/types/tsup.config.ts
[33m@repo/packages-types:build: [0m[34mCLI[39m Target: es2022
[33m@repo/packages-types:build: [0m[34mCLI[39m Cleaning output folder
[33m@repo/packages-types:build: [0m[34mCJS[39m Build start
[33m@repo/packages-types:build: [0m[34mESM[39m Build start
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js     [22m[32m803.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js            [22m[32m2.70 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js             [22m[32m919.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js     [22m[32m451.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js             [22m[32m219.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js       [22m[32m999.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/index.js.map        [22m[32m6.58 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/user.js.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/health-check.js.map [22m[32m810.00 B[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/role.js.map         [22m[32m331.00 B[39m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/pagination.js.map   [22m[32m2.17 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m [1mdist/api-response.js.map [22m[32m1.92 KB[39m
[33m@repo/packages-types:build: [0m[32mCJS[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs     [22m[32m396.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs             [22m[32m769.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs             [22m[32m191.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs            [22m[32m2.18 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs       [22m[32m856.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs     [22m[32m629.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/health-check.mjs.map [22m[32m800.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/user.mjs.map         [22m[32m1.99 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/role.mjs.map         [22m[32m326.00 B[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/index.mjs.map        [22m[32m6.57 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/pagination.mjs.map   [22m[32m2.15 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m [1mdist/api-response.mjs.map [22m[32m1.90 KB[39m
[33m@repo/packages-types:build: [0m[32mESM[39m âš¡ï¸ Build success in 90ms
[33m@repo/packages-types:build: [0mDTS Build start
[33m@repo/packages-types:build: [0mDTS âš¡ï¸ Build success in 694ms
[33m@repo/packages-types:build: [0mDTS dist/index.d.ts         606.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.ts  1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.ts  483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.ts    1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.ts          213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.ts          1.30 KB
[33m@repo/packages-types:build: [0mDTS dist/index.d.mts        611.00 B
[33m@repo/packages-types:build: [0mDTS dist/api-response.d.mts 1.45 KB
[33m@repo/packages-types:build: [0mDTS dist/health-check.d.mts 483.00 B
[33m@repo/packages-types:build: [0mDTS dist/pagination.d.mts   1.34 KB
[33m@repo/packages-types:build: [0mDTS dist/role.d.mts         213.00 B
[33m@repo/packages-types:build: [0mDTS dist/user.d.mts         1.30 KB
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 build /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> pnpm update-exports && tsup
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0m> @repo/packages-utils@1.0.0 update-exports /Users/arman/Github/arawn/packages/utils
[35m@repo/packages-utils:build: [0m> tsx ../../config/update-exports.ts .
[35m@repo/packages-utils:build: [0m
[35m@repo/packages-utils:build: [0mâœ… Updated exports in package.json
[35m@repo/packages-utils:build: [0m   Entry points: index, array, async, date, errors, number, response, string
[35m@repo/packages-utils:build: [0m[34mCLI[39m Building entry: {"index":"src/index.ts","array":"src/array.ts","async":"src/async.ts","date":"src/date.ts","errors":"src/errors.ts","number":"src/number.ts","response":"src/response.ts","string":"src/string.ts"}
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsconfig: tsconfig.json
[35m@repo/packages-utils:build: [0m[34mCLI[39m tsup v8.5.0
[35m@repo/packages-utils:build: [0m[34mCLI[39m Using tsup config: /Users/arman/Github/arawn/packages/utils/tsup.config.ts
[35m@repo/packages-utils:build: [0m[34mCLI[39m Target: es2022
[35m@repo/packages-utils:build: [0m[34mCLI[39m Cleaning output folder
[35m@repo/packages-utils:build: [0m[34mCJS[39m Build start
[35m@repo/packages-utils:build: [0m[34mESM[39m Build start
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs         [22m[32m1002.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs       [22m[32m491.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs        [22m[32m381.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs       [22m[32m387.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs        [22m[32m527.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs     [22m[32m451.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs       [22m[32m1.56 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs        [22m[32m4.26 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/date.mjs.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/string.mjs.map   [22m[32m824.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/array.mjs.map    [22m[32m930.00 B[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/async.mjs.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/errors.mjs.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/number.mjs.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/index.mjs.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m [1mdist/response.mjs.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mESM[39m âš¡ï¸ Build success in 133ms
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js        [22m[32m418.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js        [22m[32m561.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js         [22m[32m1.05 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js       [22m[32m1.76 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js     [22m[32m525.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js       [22m[32m426.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js        [22m[32m4.74 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js       [22m[32m531.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/array.js.map    [22m[32m931.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/async.js.map    [22m[32m1.11 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/date.js.map     [22m[32m2.09 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/errors.js.map   [22m[32m3.28 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/response.js.map [22m[32m1.93 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/index.js.map    [22m[32m10.80 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/number.js.map   [22m[32m1.14 KB[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m [1mdist/string.js.map   [22m[32m825.00 B[39m
[35m@repo/packages-utils:build: [0m[32mCJS[39m âš¡ï¸ Build success in 135ms
[35m@repo/packages-utils:build: [0mDTS Build start
[35m@repo/packages-utils:build: [0mDTS âš¡ï¸ Build success in 601ms
[35m@repo/packages-utils:build: [0mDTS dist/index.d.ts     488.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.ts     190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.ts     178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.ts      240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.ts    1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.ts    177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.ts  1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.ts    147.00 B
[35m@repo/packages-utils:build: [0mDTS dist/index.d.mts    495.00 B
[35m@repo/packages-utils:build: [0mDTS dist/array.d.mts    190.00 B
[35m@repo/packages-utils:build: [0mDTS dist/async.d.mts    178.00 B
[35m@repo/packages-utils:build: [0mDTS dist/date.d.mts     240.00 B
[35m@repo/packages-utils:build: [0mDTS dist/errors.d.mts   1.23 KB
[35m@repo/packages-utils:build: [0mDTS dist/number.d.mts   177.00 B
[35m@repo/packages-utils:build: [0mDTS dist/response.d.mts 1.24 KB
[35m@repo/packages-utils:build: [0mDTS dist/string.d.mts   147.00 B
[32m@repo/frontend:test: [0mcache hit (outputs already on disk), replaying logs [2m97dfe77b100788be[0m
[35m@repo/api:test: [0mcache miss, executing [2mbc806677f528e424[0m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m> @repo/frontend@1.0.0 test /Users/arman/Github/arawn/apps/frontend
[32m@repo/frontend:test: [0m> vitest run
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?25l
[32m@repo/frontend:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/frontend[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?2026h
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m514ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx[2m [queued][22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/lib/__tests__/utils.test.ts[2m 0/5[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (5)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m615ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/lib/__tests__/utils.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 5[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m 0/8[22m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx[2m 1/6[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m6 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m815ms
[32m@repo/frontend:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/hooks/api/__tests__/use-users.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 177[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[1m[33m â¯ [39m[22m[30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx[2m 4/8[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m[1m[32m2 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m[1m[32m15 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m915ms
[32m@repo/frontend:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[43m @repo/frontend [49m[39m src/components/ui/__tests__/button.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 173[2mms[22m[39m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[2m Test Files [22m [1m[32m3 passed[39m[22m[90m (3)[39m
[32m@repo/frontend:test: [0m[2m      Tests [22m [1m[32m19 passed[39m[22m[90m (19)[39m
[32m@repo/frontend:test: [0m[2m   Start at [22m 13:17:41
[32m@repo/frontend:test: [0m[2m   Duration [22m 947ms[2m (transform 87ms, setup 442ms, collect 169ms, tests 355ms, environment 1.01s, prepare 145ms)[22m
[32m@repo/frontend:test: [0m
[32m@repo/frontend:test: [0m[?25h
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m> @repo/api@1.0.0 test /Users/arman/Github/arawn/apps/api
[35m@repo/api:test: [0m> vitest run
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?25l
[35m@repo/api:test: [0m[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90m/Users/arman/Github/arawn/apps/api[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?2026h
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m [queued][22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m0ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m910ms
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 2/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m2 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m1.31s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 4/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m4 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m1.41s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 6/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m6 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m1.52s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 7/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m7 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m1.82s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 7/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[32m7 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m1.92s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 8/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m2.12s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/password.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m 8/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (10)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m2.12s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [31mâ¯[39m [30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts [2m([22m[2m10 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 2078[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould successfully change password with correct current password[32m 289[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould revoke all sessions after password change[32m 185[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould throw UnauthorizedError with incorrect current password[32m 125[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould throw ValidationError when user has no password account[32m 9[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould throw ValidationError when account has no password[32m 9[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould handle bcrypt password hashing correctly[32m 232[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould work with special characters in password[32m 244[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m Password Service Integration Tests[2m > [22mchangePassword[2m > [22mshould maintain data consistency on concurrent password changes[39m[32m 296[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ 
[35m@repo/api:test: [0mInvalid `this.prisma.account.update()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/src/services/password.service.ts:42:31
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  39 
[35m@repo/api:test: [0m  40 const hashedPassword = await bcrypt.hash(newPassword, 10);
[35m@repo/api:test: [0m  41 
[35m@repo/api:test: [0mâ†’ 42 await this.prisma.account.update(
[35m@repo/api:test: [0mAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Password Service Integration Tests[2m > [22mDatabase Constraints and Edge Cases[2m > [22mshould handle non-existent user gracefully[32m 9[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m Password Service Integration Tests[2m > [22mDatabase Constraints and Edge Cases[2m > [22mshould handle user with multiple accounts correctly[39m[32m 60[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ 
[35m@repo/api:test: [0mInvalid `prisma.account.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/password.integration.spec.ts:375:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  372 const password = 'Password123!';
[35m@repo/api:test: [0m  373 const hashedPassword = await bcrypt.hash(password, 10);
[35m@repo/api:test: [0m  374 
[35m@repo/api:test: [0mâ†’ 375 await prisma.account.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `accounts_userId_fkey`[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (24)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m2.22s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 0/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (24)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m2.93s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 2/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (24)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m3.03s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 7/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (24)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m3.23s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m18 passed[39m[22m[90m (24)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m3.33s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/auth-flow.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m 12/14[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m1 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m18 passed[39m[22m[90m (24)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m3.33s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [31mâ¯[39m [30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts [2m([22m[2m14 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 1048[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m Authentication Flow Integration Tests[2m > [22mSignup and Login Flow[2m > [22mshould allow user to signup and login with email/password[39m[32m 84[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ 
[35m@repo/api:test: [0mInvalid `prisma.account.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/auth-flow.integration.spec.ts:35:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  32 const bcrypt = await import('bcryptjs');
[35m@repo/api:test: [0m  33 const hashedPassword = await bcrypt.hash(password, 10);
[35m@repo/api:test: [0m  34 
[35m@repo/api:test: [0mâ†’ 35 await prisma.account.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `accounts_userId_fkey`[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m Authentication Flow Integration Tests[2m > [22mSignup and Login Flow[2m > [22mshould create session on successful login[39m[32m 65[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ 
[35m@repo/api:test: [0mInvalid `prisma.account.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/auth-flow.integration.spec.ts:69:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  66 const bcrypt = await import('bcryptjs');
[35m@repo/api:test: [0m  67 const hashedPassword = await bcrypt.hash('password123', 10);
[35m@repo/api:test: [0m  68 
[35m@repo/api:test: [0mâ†’ 69 await prisma.account.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `accounts_userId_fkey`[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mSignup and Login Flow[2m > [22mshould not allow duplicate email signups[32m 10[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mSession Management[2m > [22mshould allow multiple sessions for same user[32m 10[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mSession Management[2m > [22mshould filter out expired sessions[32m 10[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mSession Management[2m > [22mshould delete session on logout[32m 8[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mSession Management[2m > [22mshould revoke all user sessions[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mEmail Verification Flow[2m > [22mshould create verification record on signup[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mEmail Verification Flow[2m > [22mshould mark user as verified after email verification[32m 4[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mEmail Verification Flow[2m > [22mshould delete verification token after successful verification[32m 5[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mPassword Reset Flow[2m > [22mshould create password reset token[32m 4[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mPassword Reset Flow[2m > [22mshould update password and invalidate reset token[32m 219[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mUser Role Management[2m > [22mshould assign default role on user creation[32m 10[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Authentication Flow Integration Tests[2m > [22mUser Role Management[2m > [22mshould allow admin role assignment[32m 7[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m20 passed[39m[22m[90m (34)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m3.43s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 0/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m20 passed[39m[22m[90m (34)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m3.93s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (34)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m4.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (34)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m4.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/users.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m 1/10[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m2 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (34)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m4.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [31mâ¯[39m [30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 750[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser CRUD Operations[2m > [22mshould create and retrieve a user[32m 8[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser CRUD Operations[2m > [22mshould update an existing user[32m 5[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m UsersService Integration Tests[2m > [22mUser CRUD Operations[2m > [22mshould delete a user[39m[32m 18[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ 
[35m@repo/api:test: [0mInvalid `this.prisma.user.delete()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/src/services/users.service.ts:114:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  111   throw new NotFoundError('User not found', { userId: id });
[35m@repo/api:test: [0m  112 }
[35m@repo/api:test: [0m  113 
[35m@repo/api:test: [0mâ†’ 114 await this.prisma.user.delete(
[35m@repo/api:test: [0mAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser CRUD Operations[2m > [22mshould throw NotFoundError when updating non-existent user[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser CRUD Operations[2m > [22mshould throw NotFoundError when deleting non-existent user[32m 4[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser Pagination and Filtering[2m > [22mshould return paginated users[32m 13[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser Pagination and Filtering[2m > [22mshould handle pagination correctly[32m 8[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser Pagination and Filtering[2m > [22mshould filter users by search query[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mUser Pagination and Filtering[2m > [22mshould sort users by email[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m UsersService Integration Tests[2m > [22mDatabase Constraints[2m > [22mshould enforce unique email constraint[32m 4[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m3 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m5 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (46)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m4.34s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m 0/12[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m3 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m5 failed[39m[22m[2m | [22m[1m[32m29 passed[39m[22m[90m (46)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m4.94s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m [queued][22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m39 passed[39m[22m[90m (46)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m5.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | test/integration/sessions.integration.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m [31mâ¯[39m [30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts [2m([22m[2m12 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 754[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mgetUserSessions[2m > [22mshould return all active sessions for a user[32m 14[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mgetUserSessions[2m > [22mshould exclude expired sessions[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m Sessions Service Integration Tests[2m > [22mgetUserSessions[2m > [22mshould return sessions ordered by most recently updated[39m[32m 21[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ 
[35m@repo/api:test: [0mInvalid `prisma.session.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/sessions.integration.spec.ts:127:45
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  124   },
[35m@repo/api:test: [0m  125 });
[35m@repo/api:test: [0m  126 
[35m@repo/api:test: [0mâ†’ 127 const session2 = await prisma.session.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `sessions_userId_fkey`[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mgetUserSessions[2m > [22mshould return empty array for user with no sessions[32m 8[2mms[22m[39m
[35m@repo/api:test: [0m[31m   [31mÃ—[31m Sessions Service Integration Tests[2m > [22mrevokeSession[2m > [22mshould delete a specific session[39m[32m 32[2mms[22m[39m
[35m@repo/api:test: [0m[31m     â†’ Session not found[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeSession[2m > [22mshould throw NotFoundError when session does not exist[32m 13[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeSession[2m > [22mshould throw NotFoundError when session belongs to different user[32m 7[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeSession[2m > [22mshould only delete the specified session, not others[32m 8[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeAllSessions[2m > [22mshould delete all sessions except current one[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeAllSessions[2m > [22mshould delete all sessions when no current session provided[32m 6[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeAllUserSessions[2m > [22mshould delete all sessions for a user[32m 5[2mms[22m[39m
[35m@repo/api:test: [0m   [32mâœ“[39m Sessions Service Integration Tests[2m > [22mrevokeAllUserSessions[2m > [22mshould not affect other users sessions[32m 7[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m [queued][22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m39 passed[39m[22m[90m (46)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m5.14s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m40 passed[39m[22m[90m (54)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m5.85s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m40 passed[39m[22m[90m (54)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m5.85s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/services/sessions.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts[2m 1/8[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m0 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m40 passed[39m[22m[90m (54)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m5.85s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m src/services/sessions.service.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 658[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 0/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m47 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m5.95s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[KPrisma schema loaded from prisma/schema.prisma
[35m@repo/api:test: [0mDatasource "db": PostgreSQL database "app_dev_test", schema "public" at "localhost:5432"
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m5 migrations found in prisma/migrations
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0mNo pending migrations to apply.
[35m@repo/api:test: [0m[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Running test database migrations...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâœ… Test database ready
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m48 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m6.65s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K/bin/sh: psql: command not found
[35m@repo/api:test: [0m[90mstderr[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâš ï¸ Test database cleanup failed (this is usually ok)
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m48 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m6.65s
[35m@repo/api:test: [0m[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/services/users.service.spec.ts
[35m@repo/api:test: [0m[22m[39mâ³ Cleaning up test database...
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[1m[33m â¯ [39m[22m[30m[45m @repo/api [49m[39m src/services/users.service.spec.ts[2m 1/11[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m[1m[31m4 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m[1m[31m7 failed[39m[22m[2m | [22m[1m[32m48 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m6.65s
[35m@repo/api:test: [0m[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K [32mâœ“[39m [30m[45m @repo/api [49m[39m src/services/users.service.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 689[2mms[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 7 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m > [22mAuthentication Flow Integration Tests[2m > [22mSignup and Login Flow[2m > [22mshould allow user to signup and login with email/password
[35m@repo/api:test: [0m[31m[1mPrismaClientKnownRequestError[22m: 
[35m@repo/api:test: [0mInvalid `prisma.account.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/auth-flow.integration.spec.ts:35:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  32 const bcrypt = await import('bcryptjs');
[35m@repo/api:test: [0m  33 const hashedPassword = await bcrypt.hash(password, 10);
[35m@repo/api:test: [0m  34 
[35m@repo/api:test: [0mâ†’ 35 await prisma.account.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `accounts_userId_fkey`[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m228:13[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleAndLogRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m174:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.request ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m143:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m a ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:[2m833:24[22m[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m test/integration/auth-flow.integration.spec.ts:[2m35:7[22m[39m
[35m@repo/api:test: [0m    [90m 33| [39m      [35mconst[39m hashedPassword [33m=[39m [35mawait[39m bcrypt[33m.[39m[34mhash[39m(password[33m,[39m [34m10[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m 34| [39m
[35m@repo/api:test: [0m    [90m 35| [39m      [35mawait[39m prisma[33m.[39maccount[33m.[39m[34mcreate[39m({
[35m@repo/api:test: [0m    [90m   | [39m      [31m^[39m
[35m@repo/api:test: [0m    [90m 36| [39m        data[33m:[39m {
[35m@repo/api:test: [0m    [90m 37| [39m          userId[33m:[39m user[33m.[39mid[33m,[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/auth-flow.integration.spec.ts[2m > [22mAuthentication Flow Integration Tests[2m > [22mSignup and Login Flow[2m > [22mshould create session on successful login
[35m@repo/api:test: [0m[31m[1mPrismaClientKnownRequestError[22m: 
[35m@repo/api:test: [0mInvalid `prisma.account.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/auth-flow.integration.spec.ts:69:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  66 const bcrypt = await import('bcryptjs');
[35m@repo/api:test: [0m  67 const hashedPassword = await bcrypt.hash('password123', 10);
[35m@repo/api:test: [0m  68 
[35m@repo/api:test: [0mâ†’ 69 await prisma.account.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `accounts_userId_fkey`[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m228:13[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleAndLogRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m174:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.request ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m143:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m a ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:[2m833:24[22m[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m test/integration/auth-flow.integration.spec.ts:[2m69:7[22m[39m
[35m@repo/api:test: [0m    [90m 67| [39m      [35mconst[39m hashedPassword [33m=[39m [35mawait[39m bcrypt[33m.[39m[34mhash[39m([32m'password123'[39m[33m,[39m [34m10[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m 68| [39m
[35m@repo/api:test: [0m    [90m 69| [39m      [35mawait[39m prisma[33m.[39maccount[33m.[39m[34mcreate[39m({
[35m@repo/api:test: [0m    [90m   | [39m      [31m^[39m
[35m@repo/api:test: [0m    [90m 70| [39m        data[33m:[39m {
[35m@repo/api:test: [0m    [90m 71| [39m          userId[33m:[39m user[33m.[39mid[33m,[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m > [22mPassword Service Integration Tests[2m > [22mchangePassword[2m > [22mshould maintain data consistency on concurrent password changes
[35m@repo/api:test: [0m[31m[1mPrismaClientKnownRequestError[22m: 
[35m@repo/api:test: [0mInvalid `this.prisma.account.update()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/src/services/password.service.ts:42:31
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  39 
[35m@repo/api:test: [0m  40 const hashedPassword = await bcrypt.hash(newPassword, 10);
[35m@repo/api:test: [0m  41 
[35m@repo/api:test: [0mâ†’ 42 await this.prisma.account.update(
[35m@repo/api:test: [0mAn operation failed because it depends on one or more records that were required but not found. No record was found for an update.[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m228:13[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleAndLogRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m174:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.request ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m143:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m a ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:[2m833:24[22m[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m PasswordService.changePassword src/services/password.service.ts:[2m42:5[22m[39m
[35m@repo/api:test: [0m    [90m 40| [39m    [35mconst[39m hashedPassword [33m=[39m [35mawait[39m bcrypt[33m.[39m[34mhash[39m(newPassword[33m,[39m [34m10[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m 41| [39m
[35m@repo/api:test: [0m    [90m 42| [39m    [35mawait[39m [35mthis[39m[33m.[39mprisma[33m.[39maccount[33m.[39m[34mupdate[39m({
[35m@repo/api:test: [0m    [90m   | [39m    [31m^[39m
[35m@repo/api:test: [0m    [90m 43| [39m      where[33m:[39m {
[35m@repo/api:test: [0m    [90m 44| [39m        id[33m:[39m account[33m.[39mid[33m,[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m test/integration/password.integration.spec.ts:[2m320:7[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/password.integration.spec.ts[2m > [22mPassword Service Integration Tests[2m > [22mDatabase Constraints and Edge Cases[2m > [22mshould handle user with multiple accounts correctly
[35m@repo/api:test: [0m[31m[1mPrismaClientKnownRequestError[22m: 
[35m@repo/api:test: [0mInvalid `prisma.account.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/password.integration.spec.ts:375:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  372 const password = 'Password123!';
[35m@repo/api:test: [0m  373 const hashedPassword = await bcrypt.hash(password, 10);
[35m@repo/api:test: [0m  374 
[35m@repo/api:test: [0mâ†’ 375 await prisma.account.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `accounts_userId_fkey`[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m228:13[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleAndLogRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m174:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.request ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m143:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m a ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:[2m833:24[22m[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m test/integration/password.integration.spec.ts:[2m375:7[22m[39m
[35m@repo/api:test: [0m    [90m373| [39m      [35mconst[39m hashedPassword [33m=[39m [35mawait[39m bcrypt[33m.[39m[34mhash[39m(password[33m,[39m [34m10[39m)[33m;[39m
[35m@repo/api:test: [0m    [90m374| [39m
[35m@repo/api:test: [0m    [90m375| [39m      [35mawait[39m prisma[33m.[39maccount[33m.[39m[34mcreate[39m({
[35m@repo/api:test: [0m    [90m   | [39m      [31m^[39m
[35m@repo/api:test: [0m    [90m376| [39m        data[33m:[39m {
[35m@repo/api:test: [0m    [90m377| [39m          userId[33m:[39m user[33m.[39mid[33m,[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m > [22mSessions Service Integration Tests[2m > [22mgetUserSessions[2m > [22mshould return sessions ordered by most recently updated
[35m@repo/api:test: [0m[31m[1mPrismaClientKnownRequestError[22m: 
[35m@repo/api:test: [0mInvalid `prisma.session.create()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/test/integration/sessions.integration.spec.ts:127:45
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  124   },
[35m@repo/api:test: [0m  125 });
[35m@repo/api:test: [0m  126 
[35m@repo/api:test: [0mâ†’ 127 const session2 = await prisma.session.create(
[35m@repo/api:test: [0mForeign key constraint violated on the constraint: `sessions_userId_fkey`[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m228:13[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleAndLogRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m174:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.request ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m143:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m a ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:[2m833:24[22m[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m test/integration/sessions.integration.spec.ts:[2m127:24[22m[39m
[35m@repo/api:test: [0m    [90m125| [39m      })[33m;[39m
[35m@repo/api:test: [0m    [90m126| [39m
[35m@repo/api:test: [0m    [90m127| [39m      [35mconst[39m session2 [33m=[39m [35mawait[39m prisma[33m.[39msession[33m.[39m[34mcreate[39m({
[35m@repo/api:test: [0m    [90m   | [39m                       [31m^[39m
[35m@repo/api:test: [0m    [90m128| [39m        data[33m:[39m {
[35m@repo/api:test: [0m    [90m129| [39m          userId[33m:[39m user[33m.[39mid[33m,[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[5/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/sessions.integration.spec.ts[2m > [22mSessions Service Integration Tests[2m > [22mrevokeSession[2m > [22mshould delete a specific session
[35m@repo/api:test: [0m[31m[1mNotFoundError[22m: Session not found[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m SessionsService.revokeSession src/services/sessions.service.ts:[2m50:13[22m[39m
[35m@repo/api:test: [0m    [90m 48| [39m
[35m@repo/api:test: [0m    [90m 49| [39m    [35mif[39m ([33m![39msession) {
[35m@repo/api:test: [0m    [90m 50| [39m      [35mthrow[39m [35mnew[39m [33mNotFoundError[39m([32m'Session not found'[39m[33m,[39m {
[35m@repo/api:test: [0m    [90m   | [39m            [31m^[39m
[35m@repo/api:test: [0m    [90m 51| [39m        sessionId[33m,[39m
[35m@repo/api:test: [0m    [90m 52| [39m        userId[33m,[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m test/integration/sessions.integration.spec.ts:[2m188:7[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[6/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[41m[1m FAIL [22m[49m [30m[45m @repo/api [49m[39m test/integration/users.integration.spec.ts[2m > [22mUsersService Integration Tests[2m > [22mUser CRUD Operations[2m > [22mshould delete a user
[35m@repo/api:test: [0m[31m[1mPrismaClientKnownRequestError[22m: 
[35m@repo/api:test: [0mInvalid `this.prisma.user.delete()` invocation in
[35m@repo/api:test: [0m/Users/arman/Github/arawn/apps/api/src/services/users.service.ts:114:28
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m  111   throw new NotFoundError('User not found', { userId: id });
[35m@repo/api:test: [0m  112 }
[35m@repo/api:test: [0m  113 
[35m@repo/api:test: [0mâ†’ 114 await this.prisma.user.delete(
[35m@repo/api:test: [0mAn operation failed because it depends on one or more records that were required but not found. No record was found for a delete.[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m228:13[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.handleAndLogRequestError ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m174:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m ei.request ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/RequestHandler.ts:[2m143:12[22m[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m a ../../node_modules/.pnpm/@prisma+client@6.17.1_prisma@6.17.1_magicast@0.3.5_typescript@5.9.3__typescript@5.9.3/node_modules/@prisma/client/src/runtime/getPrismaClient.ts:[2m833:24[22m[39m
[35m@repo/api:test: [0m[36m [2mâ¯[22m UsersService.deleteUser src/services/users.service.ts:[2m114:5[22m[39m
[35m@repo/api:test: [0m    [90m112| [39m    }
[35m@repo/api:test: [0m    [90m113| [39m
[35m@repo/api:test: [0m    [90m114| [39m    [35mawait[39m [35mthis[39m[33m.[39mprisma[33m.[39muser[33m.[39m[35mdelete[39m({
[35m@repo/api:test: [0m    [90m   | [39m    [31m^[39m
[35m@repo/api:test: [0m    [90m115| [39m      where[33m:[39m { id }[33m,[39m
[35m@repo/api:test: [0m    [90m116| [39m    })[33m;[39m
[35m@repo/api:test: [0m[90m [2mâ¯[22m test/integration/users.integration.spec.ts:[2m84:7[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[7/7]â¯[22m[39m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[35m@repo/api:test: [0m[2m      Tests [22m [1m[31m7 failed[39m[22m[2m | [22m[1m[32m58 passed[39m[22m[90m (65)[39m
[35m@repo/api:test: [0m[2m   Start at [22m 13:20:15
[35m@repo/api:test: [0m[2m   Duration [22m 6.71s[2m (transform 56ms, setup 86ms, collect 68ms, tests 5.98s, environment 0ms, prepare 163ms)[22m
[35m@repo/api:test: [0m
[35m@repo/api:test: [0m[?25h[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mTest failed. See above for more details.[39m
[35m@repo/api:test: [0mERROR: command finished with error: command (/Users/arman/Github/arawn/apps/api) /Users/arman/.nvm/versions/node/v22.17.0/bin/pnpm run test exited (1)
@repo/api#test: command (/Users/arman/Github/arawn/apps/api) /Users/arman/.nvm/versions/node/v22.17.0/bin/pnpm run test exited (1)

[1m Tasks:    [32m[1m7 successful[0m, 8 total[0m
[1mCached:    [1m7 cached[0m, 8 total[0m
[1m  Time:    [1m7.215s[0m [0m
[1mFailed:    [31m[1m@repo/api#test[0m[0m

    ...Finishing writing to cache...                                                                                                             [2K[2m>  [0m ...Finishing writing to cache...                                                                                                             [2K[31;40m ERROR [0m [31;49mrun failed: command  exited (1)[0m
[41m[30mâ€‰ELIFECYCLEâ€‰[39m[49m [31mTest failed. See above for more details.[39m
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0mtook [1;33m8s[0m 
[1;31mâ¯[0m [K[?1h=[?2004hc[?1l>[?2004l
]2;echo -e "\033c"]1;cc
[1m[7m%[27m[1m[0m                                                                                                                                                 ]2;arman@arman:~/Github/arawn]1;~/Github/arawn]7;file://arman.local/Users/arman/Github/arawn\[0m[27m[24m[J
[1;36marawn[0m on [1;35mî‚  development[0m [1;31m[âœ˜!?][0m via [1;32mîœ˜ v22.17.0 [0m
[1;32mâ¯[0m [K[?1h=[?2004hgg[90mitc[39mg[39mi[39mt[39mx[90m -m "Update polling rate for task statuses in repository"[39m[57D[39m [39m-[39mm[39m [39m"[39mA[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [51D[90mdd password visibility toggle to password inputs"[39m[49D[39md[39md[39m [39mi[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [45D[90mntegrations/google-analytics (ga4) UI flow for connecting properties"[39m[69D[39mn[39mt[39me[39mg[39mr[39ma[39mt[39mi[39mo[39mn[39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [39m [58Dtests sui    s suite +  + Update existing tests"pnpm    